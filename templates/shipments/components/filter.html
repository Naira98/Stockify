<form method="get" class="flex flex-col sm:flex-row sm:items-end sm:gap-6 gap-4 mb-6">

  <!-- Factory Dropdown -->
  <div class="flex flex-col w-full sm:w-64">
    <label for="id_factory" class="text-sm font-medium text-gray-700 mb-1">Factory</label>
    <select name="factory" id="id_factory"
            onchange="this.form.submit()"
            class="block w-full text-sm py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
      <option value="">All Factories</option>
      {% for factory in form.fields.factory.queryset %}
        <option value="{{ factory.id }}" {% if factory.id|stringformat:"s" == selected_factory_id %}selected{% endif %}>
          {{ factory.name }}
        </option>
      {% endfor %}
    </select>
  </div>

  <!-- Status Filter -->
  <div class="flex flex-col sm:gap-1">
    <label class="text-sm font-medium text-gray-700">Status</label>
    <div class="flex flex-wrap gap-2">
      {% for value, label in statuses %}
        <label class="cursor-pointer">
          <input 
            type="radio" 
            name="status" 
            value="{{ value }}" 
            class="hidden peer"
            onchange="this.form.submit()" 
            {% if value|stringformat:"s" == previous_status|stringformat:"s" %}checked{% endif %}
          />
          <div class="px-3 py-1 border rounded-lg text-sm font-medium 
                      peer-checked:bg-indigo-600 peer-checked:text-white hover:bg-indigo-500 transition">
            {{ label }}
          </div>
        </label>
      {% endfor %}
    </div>
  </div>
</form>
