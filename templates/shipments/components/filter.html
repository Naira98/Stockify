<!-- Filter Section -->
<div class="bg-white border-2 border-dashed border-cyan-200 p-6 rounded-xl shadow mb-6">
  <form method="get" action="">
    <div class="flex flex-col lg:flex-row flex-wrap gap-4 items-end">
      <!-- Factory Dropdown -->
      <div class="flex flex-col w-full lg:w-1/6">
        <label for="id_factory" class="text-sm text-gray-700 mb-1">Factory</label>
        <select id="id_factory" name="factory"
          class="w-full pl-3 pr-8 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-400 transition-shadow">
          <option value="">All Factories</option>
          {% for factory in form.fields.factory.queryset %}
            <option value="{{ factory.id }}" {% if factory.id|stringformat:"s" == selected_factory_id %}selected{% endif %}>
              {{ factory.name }}
            </option>
          {% endfor %}
        </select>
      </div>

      <!-- Status Dropdown -->
      <div class="flex flex-col w-full lg:w-1/6">
        <label for="id_status" class="text-sm text-gray-700 mb-1">Status</label>
        <select id="id_status" name="status"
          class="w-full pl-3 pr-8 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-400 transition-shadow">
          <option value="">All Statuses</option>
          {% for value, label in statuses %}
            <option value="{{ value }}" {% if value|stringformat:"s" == previous_status|stringformat:"s" %}selected{% endif %}>
              {{ label }}
            </option>
          {% endfor %}
        </select>
      </div>

      <!-- From Date -->
      <div class="flex flex-col w-full lg:w-1/6">
        <label for="from_date" class="text-sm text-gray-700 mb-1">From</label>
        <input 
          type="date" 
          id="from_date" 
          name="from_date"
          value="{{ request.GET.from_date }}" 
          class="w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-400 transition-shadow"
        />
      </div>

      <!-- To Date -->
      <div class="flex flex-col w-full lg:w-1/6">
        <label for="to_date" class="text-sm text-gray-700 mb-1">To</label>
        <input 
          type="date" 
          id="to_date" 
          name="to_date"
          value="{{ request.GET.to_date }}" 
          class="w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-400 transition-shadow"
        />
      </div>

      <!-- Filter Button -->
      <div class="flex w-full lg:w-1/6 items-end">
        <button type="submit"
          class="w-full border border-cyan-400 text-cyan-600 px-3 py-2 text-sm rounded-md shadow hover:bg-cyan-50 transition flex items-center justify-center gap-1">
          <i class="fas fa-filter"></i> Filter
        </button>
      </div>
    </div>
  </form>
</div>
